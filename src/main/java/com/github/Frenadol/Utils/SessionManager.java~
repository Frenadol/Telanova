package com.github.Frenadol.Utils;

import com.github.Frenadol.Model.*;

import java.util.ArrayList;
import java.util.List;

public class SessionManager {
    private static SessionManager instance;
    private List<Clothes> details;
    private List<Clothes> shoppingCart;
    private User currentUser;
    private Worker currentWorker;
    private Client currentClient;

    private SessionManager() {
        details = new ArrayList<>();
        shoppingCart = new ArrayList<>();
    }

    public static SessionManager getInstance() {
        if (instance == null) {
            instance = new SessionManager();
        }
        return instance;
    }

    public void addDetail(Clothes newDetail, int quantity) {
        for (Clothes detail : details) {
            if (detail.getName_clothes().equals(newDetail.getName_clothes())) {
                updateDetailQuantity(detail, quantity);
                return;
            }
        }
        newDetail.setCantidad(quantity);
        details.add(newDetail);
    }

    public void updateDetailQuantity(Clothes clothes, int quantity) {
        for (Clothes detail : details) {
            if (detail.equals(clothes)) {
                int currentQuantity = detail.getCantidad();
                detail.setCantidad(currentQuantity + quantity);
                break;
            }
        }
    }

    public List<Clothes> getDetails() {
        return new ArrayList<>(details);
    }

    public void addToCart(Clothes clothes, int cantidad) {
        if (!shoppingCart.contains(clothes)) {
            shoppingCart.add(clothes);

        }
    }

    public List<Clothes> getShoppingCart() {
        return new ArrayList<>(shoppingCart);
    }

    public void setCurrentWorker(Worker worker) {
        this.currentWorker = worker;
    }

    public void setCurrentClient(Client client) {
        this.currentClient = client;
    }

    public void setCurrentUser(User user) {
        this.currentUser = user;
    }

    public User getCurrentUser() {
        return currentUser;
    }

    public Worker getCurrentWorker() {
        return currentWorker;
    }

    public Client getCurrentClient() {
        return currentClient;
    }
}