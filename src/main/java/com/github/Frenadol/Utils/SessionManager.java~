package com.github.Frenadol.Utils;

import com.github.Frenadol.Model.*;

import java.util.ArrayList;
import java.util.List;

public class SessionManager {
    private static SessionManager instance;
    private List<Client_Clothes> details;
    private User currentUser;
    private Worker currentWorker;
    private Client currentClient;
    private SessionManager() {
        details = new ArrayList<>();
    }

    public static SessionManager getInstance() {
        if (instance == null) {
            instance = new SessionManager();
        }
        return instance;
    }

    public  void addDetail(Client_Clothes newDetail, int quantity) {
        for (Client_Clothes detail : details) {
            if (detail.getClothes().equals(newDetail.getClothes())) {
                updateDetailQuantity(detail.getClothes(), quantity);
                return;
            }
        }
        newDetail.setCantidad(quantity);
        details.add(newDetail);
    }

    public void updateDetailQuantity(Clothes clothes, int quantity) {
        for (Client_Clothes detail : details) {
            if (detail.getClothes().equals(clothes)) {
                int currentQuantity = detail.getCantidad();
                detail.setCantidad(currentQuantity + quantity);
                break;
            }
        }
    }

    public List<Client_Clothes> getDetails() {
        return new ArrayList<>(details);
    }
    public void setCurrentWorker(Worker worker) {
        this.currentWorker = worker;
    }

    public void setCurrentClient(Client client) {
        this.currentClient = client;
    }


    public void setCurrentUser(User user) {
        this.currentUser = user;
    }
}